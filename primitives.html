<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <title>A-Frame Сфера из Кубов</title>
    <script src="https://aframe.io/releases/1.2.0/aframe.min.js"></script>
</head>
<body>
    <a-scene>
        <!-- Освещение -->
        <a-light type="ambient" color="#445451"></a-light>
        <a-light type="directional" position="2 10 -5" intensity="0.2" cast-shadow></a-light>
        
        <!-- Небо -->
        <a-sky color="#222244"></a-sky>
        
        <!-- Пол -->
        <a-plane position="0 0 -4" rotation="-90 0 0" width="50" height="50" color="#382c1e" shadow></a-plane>
        <a-sphere id="kidball" position="0 0.1 10" radius="0.5"></a-sphere>
        <!-- Камера -->
        <a-camera position="0 1.6 5">
            <a-cursor></a-cursor>
        </a-camera>
        
        <!-- Контейнер для сферы из кубов -->
        <a-entity id="cube-sphere-container"></a-entity>
        <a-entity id="column-sphere-container1"></a-entity>
        <a-entity id="column-sphere-container2"></a-entity>
        <a-entity id="column-sphere-container3"></a-entity>
         <a-light type="point" intensity="0.8" position="2 10 -5"></a-light>
    </a-scene>

    <script>
        // Ждем загрузки A-Frame
        document.addEventListener('DOMContentLoaded', function() {
            // Функция для создания сферы из кубов

            function createSphereColumn(centerx,centery,centerz,radius,length,container){ //Создает колону из сфер, которая растет из заданной точки
              container = document.getElementById(container);

              container.innerHTML = '';

              for (let i = 0; i < length/0.1; i++) {
                  const z = centerz+(Math.abs(50-i)/100*Math.random()*radius*4);
                  const x = centerx+(Math.abs(50-i)/100*Math.random()*radius*4);
                  const y = centery+(length/100)*i;
                  const sphere = document.createElement('a-sphere');
                    
                  // Устанавливаем атрибуты
                  sphere.setAttribute('position', {x: x, y: y, z: z});
                  sphere.setAttribute('radius', radius/2+radius*Math.abs(50-i)/100);
                  
                  // Случайный цвет
                  const hue =30// Math.random() * 360;
                  sphere.setAttribute('color', `hsl(${hue}, 20%, 20%)`);
                  container.appendChild(sphere);
              }
            }
            createSphereColumn(-5,0,-6,2,20,'column-sphere-container1');

            createSphereColumn(10,0,13,1,15,'column-sphere-container2');
            createSphereColumn(-4,0,9,1,20,'column-sphere-container3');
            function createSphereSphere(radius, sphereSize, sphereCount) {//Создает сферу из сфер, которая отходит от центра
                const container = document.getElementById('cube-sphere-container');
                
                // Очищаем контейнер перед созданием новой сферы
                container.innerHTML = '';
                
                // Создаем сфуры в сферическом расположении
                for (let i = 0; i < sphereCount; i++) {
                    // Сферические координаты
                    const theta = Math.random() * Math.PI * 2; // Азимутальный угол
                    const phi = Math.acos(2 * Math.random() - 1); // Полярный угол
                    
                    // Преобразование в декартовы координаты
                    const x = radius * Math.sin(phi) * Math.cos(theta);
                    const y = radius * Math.sin(phi) * Math.sin(theta);
                    const z = radius * Math.cos(phi);
                    
                    // Создаем сферу
                    const sphere = document.createElement('a-sphere');
                    
                    // Устанавливаем атрибуты
                    sphere.setAttribute('position', {x: x, y: y, z: z});
                    sphere.setAttribute('radius', sphereSize*Math.random()*2);
                    
                    // Случайный цвет
                    const hue =30// Math.random() * 360;
                    sphere.setAttribute('color', `hsl(${hue}, 20%, 20%)`);
            
                    
                    // Добавляем сферу в контейнер
                    container.appendChild(sphere);
                }
            }
            
            // Создаем сферу из сферр
            createSphereSphere(30, 6, 1000);
          
        });
    </script>
</body>
</html>